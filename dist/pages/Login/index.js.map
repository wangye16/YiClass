{"version":3,"file":"pages/Login/index.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACRA;AACA;AACA;AACA","sources":["webpack://YiClass/._src_pages_Login_index.tsx","webpack://YiClass/./src/pages/Login/index.tsx?52e9","webpack://YiClass/._src_services_login.ts"],"sourcesContent":["import { View, Text, Image, Button } from \"@tarojs/components\";\nimport wechat from '@/assets/icons/wechat-fill.png';\nimport Taro from \"@tarojs/taro\";\nimport { postLogin } from '@/services/login';\nimport \"./index.less\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function LoginPage() {\n  const handleLogin = () => {\n    console.log(\"微信登录跳转逻辑\");\n    Taro.getUserProfile({\n      force: true,\n      desc: '用于获取您的昵称和头像',\n      // 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写\n      success: res => {\n        console.log(\"🚀 ~ handleLogin ~ res:\", res);\n        Taro.setStorageSync('avatarUrl', res?.avatarUrl || '\"https://thirdwx.qlogo.cn/mmopen/vi_32/POgEwh4mIHO4nibH0KlMECNjjGxQUq24ZEaGT4poC6icRiccVGKSyXwibcPq4BWmiaIGuG1icwxaQX6grC9VemZoJ8rg/132\"');\n        Taro.setStorageSync('nickName', res?.nickName);\n        Taro.login({\n          async success(res) {\n            if (res.code) {\n              // 获取到 code，发送到服务器\n              console.log('登录成功，code:', res.code);\n              // 将 code 发送到服务器\n              const response = await postLogin({\n                code: res.code\n              });\n              const {\n                openid,\n                token\n              } = response.data;\n              if (openid && token) {\n                Taro.setStorageSync('token', token);\n                Taro.setStorageSync('openid', openid);\n                console.log(response, 19);\n                Taro.switchTab({\n                  url: '/pages/HomePage/index'\n                });\n              } else {\n                Taro.showToast({\n                  title: '登录失败',\n                  icon: 'error',\n                  duration: 2000\n                });\n              }\n            } else {\n              console.log('登录失败:', res.errMsg);\n            }\n          }\n        });\n      }\n    });\n    // 后续可接入实际登录逻辑\n  };\n  const hndleReadLink1 = () => {\n    // Taro.showModal({\n    //   title:'用户协议',\n    //   content:\n    // })\n  };\n  const hndleReadLink2 = () => {\n    // Taro.showModal({\n    //   title:'用户协议',\n    //   content:\n    // })\n  };\n  return /*#__PURE__*/_jsx(View, {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxs(View, {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsx(Text, {\n        className: \"title\",\n        children: \"\\u5BCC\\u5C71\\u5FB7\\u6613\\u5802\"\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"subtitle\",\n        children: \"\\u6B22\\u8FCE\\u4F7F\\u7528\\u5BCC\\u5C71\\u5FB7\\u6613\\u5802\\u5C0F\\u7A0B\\u5E8F\"\n      }), /*#__PURE__*/_jsx(Button, {\n        className: \"wechat-btn\",\n        openType: \"getUserInfo\",\n        onClick: handleLogin,\n        children: /*#__PURE__*/_jsxs(View, {\n          className: \"wechat-btn-wrapper\",\n          children: [/*#__PURE__*/_jsx(Image, {\n            src: wechat,\n            style: {\n              width: 20,\n              height: 20,\n              marginRight: 7,\n              verticalAlign: 'middle'\n            }\n          }), \"\\u5FAE\\u4FE1\\u4E00\\u952E\\u767B\\u5F55\"]\n        })\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"agreement\",\n        children: [\"\\u767B\\u5F55\\u5373\\u8868\\u793A\\u540C\\u610F\", /*#__PURE__*/_jsx(View, {\n          className: \"link\",\n          onTap: hndleReadLink1,\n          children: \"\\u300A\\u7528\\u6237\\u534F\\u8BAE\\u300B\"\n        }), \"\\u548C\", /*#__PURE__*/_jsx(View, {\n          className: \"link\",\n          onTap: hndleReadLink2,\n          children: \"\\u300A\\u9690\\u79C1\\u653F\\u7B56\\u300B\"\n        })]\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"security-tip\",\n        children: \"\\u5FAE\\u4FE1\\u5B98\\u65B9\\u767B\\u5F55\\u66F4\\u5B89\\u5168\"\n      })]\n    })\n  });\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/.pnpm/@tarojs+taro-loader@4.0.7_webpack@5.91.0_@swc+core@1.3.96_/node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/Login/index!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"富山德易堂\",\"usingComponents\":{}};\n\n\nvar inst = Page(createPageConfig(component, 'pages/Login/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n","import apiClient from './apiClient'\r\nconst postLogin = (params)=>{\r\n  return apiClient.post(`api/login`,params)\r\n}\r\nexport \r\n{\r\n  postLogin\r\n}"],"names":[],"sourceRoot":""}